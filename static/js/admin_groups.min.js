/*! RaylionWebProject 27-12-2014 */
"use strict";!function(){function a(a){var b=new XMLHttpRequest;b.open("GET","/data/admin/groups?userdata=1&groupslist=1&userslist=1",!0),b.onload=function(){this.status>=200&&this.status<400?(d=JSON.parse(this.response),a(null)):a(this.status)},b.onerror=function(){a("connection error")},b.send()}function b(a){var b=document.getElementById("updateGroupFormGroupLeader"),c=document.getElementById("user"),e=document.getElementById("groupsList");c.href="users/"+d.userData.username,c.text=d.userData.username;for(var f=!0,g=["#FFE4B2","#FFF"],h=0;h<d.groupsList.length;++h){var i=document.createElement("div");i.classList.add("groupDiv"),i.style.backgroundColor=f?g[0]:g[1],i.innerHTML=d.groupsList[h].value.groupName,i.id=h.toString(),e.appendChild(i),f=!f}for(var h=0;h<d.usersList.length;++h)if(0===d.usersList[h].value.permission.location.length&&"车间长"===d.usersList[h].value.permission.level){var j=document.createElement("option");j.value=j.text=d.usersList[h].value.username,b.appendChild(j)}a(null)}function c(){{var a,b=document.getElementById("addGroupButton"),c=document.getElementById("updateGroupForm"),e=document.getElementById("updateGroupFormGroupName"),f=(document.getElementById("updateGroupFormGroupLeader"),document.getElementById("updateGroupButton"),document.getElementById("removeGroupButton"),document.getElementById("groupsList"));document.getElementById("subGroupsListDisplay")}f.addEventListener("click",function(b){"groupsList"!==b.target.id&&(a=b.target.id,e.value=d.groupsList[a].value.groupName,c.style.display="block")}),b.addEventListener("click",function(){})}var d={};a(function(a){a&&console.error(a),b(function(a){a&&console.error(a),c()})})}();